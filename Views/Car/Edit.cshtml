@model RentAutoWeb.Models.CarEditViewModel
<h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å</h2>

<form method="post" asp-controller="Car" asp-action="Edit">
    <input type="hidden" asp-for="Car.Id" />

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ -->
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Car.Brand">–ú–∞—Ä–∫–∞:</label>
                <input asp-for="Car.Brand" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –º–∞—Ä–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è" />
                <span asp-validation-for="Car.Brand" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.Model">–ú–æ–¥–µ–ª—å:</label>
                <input asp-for="Car.Model" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è" />
                <span asp-validation-for="Car.Model" class="text-danger"></span>
            </div>

            <div class="form-group"></div>
                <label asp-for="Car.HorsePower">–ú–æ—â–Ω–æ—Å—Ç—å –ª.—Å.:</label>
                <input asp-for="Car.HorsePower" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –º–æ—â–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è" />
                <span asp-validation-for="Car.HorsePower" class="text-danger"></span>
            </div>

            <div class="form-group"></div>
                <label asp-for="Car.Color">–¶–≤–µ—Ç:</label>
                <input asp-for="Car.Color" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—è" />
                <span asp-validation-for="Car.Color" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.Year">–ì–æ–¥:</label>
                <input asp-for="Car.Year" class="form-control" type="number" min="1900" max="2030" placeholder="–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞" />
                <span asp-validation-for="Car.Year" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.Price">–¶–µ–Ω–∞ –∑–∞ —Å—É—Ç–∫–∏ (—Ä—É–±.):</label>
                <input asp-for="Car.Price" class="form-control" type="number" step="0.01" min="0" placeholder="0.00" />
                <span asp-validation-for="Car.Price" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.Category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                <input asp-for="Car.Category" class="form-control" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–µ–¥–∞–Ω, –•—ç—Ç—á–±–µ–∫, –ö—Ä–æ—Å—Å–æ–≤–µ—Ä" />
                <span asp-validation-for="Car.Category" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.FuelType">–¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞:</label>
                <select asp-for="Car.FuelType" class="form-control">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç–æ–ø–ª–∏–≤–∞</option>
                    <option value="–ë–µ–Ω–∑–∏–Ω">–ë–µ–Ω–∑–∏–Ω</option>
                    <option value="–î–∏–∑–µ–ª—å">–î–∏–∑–µ–ª—å</option>
                    <option value="–ì–∏–±—Ä–∏–¥">–ì–∏–±—Ä–∏–¥</option>
                    <option value="–≠–ª–µ–∫—Ç—Ä–æ">–≠–ª–µ–∫—Ç—Ä–æ</option>
                    <option value="–ì–∞–∑">–ì–∞–∑</option>
                </select>
                <span asp-validation-for="Car.FuelType" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.TransmissionType">–¢–∏–ø –∫–æ—Ä–æ–±–∫–∏ –ø–µ—Ä–µ–¥–∞—á:</label>
                <select asp-for="Car.TransmissionType" class="form-control">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ö–ü–ü</option>
                    <option value="–ú–µ—Ö–∞–Ω–∏–∫–∞">–ú–µ—Ö–∞–Ω–∏–∫–∞</option>
                    <option value="–ê–≤—Ç–æ–º–∞—Ç">–ê–≤—Ç–æ–º–∞—Ç</option>
                    <option value="–†–æ–±–æ—Ç">–†–æ–±–æ—Ç</option>
                    <option value="–í–∞—Ä–∏–∞—Ç–æ—Ä">–í–∞—Ä–∏–∞—Ç–æ—Ä</option>
                </select>
                <span asp-validation-for="Car.TransmissionType" class="text-danger"></span>
            </div>
        </div>

        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Car.AutoNumber">–ù–æ–º–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è:</label>
                <input asp-for="Car.AutoNumber" class="form-control" placeholder="–ê123–ë–í77" maxlength="9" />
                <span asp-validation-for="Car.AutoNumber" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.VinNumber">VIN-–Ω–æ–º–µ—Ä:</label>
                <input asp-for="Car.VinNumber" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ VIN –∞–≤—Ç–æ–º–æ–±–∏–ª—è" />
                <span asp-validation-for="Car.VinNumber" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.EngineNumber">–ù–æ–º–µ—Ä –¥–≤–∏–≥–∞—Ç–µ–ª—è:</label>
                <input asp-for="Car.EngineNumber" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–≤–∏–≥–∞—Ç–µ–ª—è" />
                <span asp-validation-for="Car.EngineNumber" class="text-danger"></span>
            </div>

            <div class="form-group"></div>
                <label asp-for="Car.BodyNumber">–ù–æ–º–µ—Ä –∫—É–∑–æ–≤–∞:</label>
                <input asp-for="Car.BodyNumber" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫—É–∑–æ–≤–∞" />
                <span asp-validation-for="Car.BodyNumber" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.ImageUrl">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
                <input asp-for="Car.ImageUrl" class="form-control" type="url" placeholder="https://example.com/image.jpg" />
                <span asp-validation-for="Car.ImageUrl" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Car.Description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea asp-for="Car.Description" class="form-control" rows="3" placeholder="–û–ø–∏—à–∏—Ç–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è"></textarea>
                <span asp-validation-for="Car.Description" class="text-danger"></span>
            </div>

            <div class="form-group checkbox-group">
                <input asp-for="Car.IsAvailable" type="checkbox" class="form-check-input" id="IsAvailable" />
                <label asp-for="Car.IsAvailable" class="form-check-label"></label>
                <span asp-validation-for="Car.IsAvailable" class="text-danger"></span>
            </div>

        </div>
    </div>

    <!-- –ò—Å—Ç–æ—Ä–∏—è –¢–û -->
    <div class="row mt-4">
        <div class="col-md-12">
            <h4>üìã –ò—Å—Ç–æ—Ä–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</h4>
            
            @if (Model.Car.MaintenanceRecords != null && Model.Car.MaintenanceRecords.Any())
            {
                <div class="maintenance-history" style="max-height: 300px; overflow-y: auto; background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                    @foreach (var record in Model.Car.MaintenanceRecords.OrderByDescending(x => x.MaintenanceDate))
                    {
                        <div style="border-left: 4px solid #007bff; padding-left: 15px; margin-bottom: 15px; background: white; padding: 10px; border-radius: 3px;">
                            <div style="font-weight: bold; color: #007bff;">
                                üìÖ @record.MaintenanceDate.ToString("dd.MM.yyyy")
                            </div>
                            <div style="margin-top: 5px;">
                                @record.Description
                            </div>
                            @if (record.CreatedAt.HasValue)
                            {
                                <small style="color: #6c757d;">
                                    –î–æ–±–∞–≤–ª–µ–Ω–æ: @record.CreatedAt.Value.ToString("dd.MM.yyyy HH:mm")
                                </small>
                            }
                        </div>
                    }
                </div>
            }
            else
            {
                <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 5px; margin-bottom: 20px;">
                    <p style="color: #6c757d; margin: 0;">–ò—Å—Ç–æ—Ä–∏—è –¢–û –ø—É—Å—Ç–∞</p>
                </div>
            }

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –¢–û -->
            <div style="background: #e7f3ff; padding: 20px; border-radius: 5px; border: 1px solid #b3d9ff;">
                <h5 style="margin-bottom: 15px;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –¢–û</h5>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label asp-for="NewMaintenanceRecord.MaintenanceDate">–î–∞—Ç–∞ –¢–û:</label>
                            <input asp-for="NewMaintenanceRecord.MaintenanceDate" class="form-control" type="date" />
                            <span asp-validation-for="NewMaintenanceRecord.MaintenanceDate" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label asp-for="NewMaintenanceRecord.Description">–û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç:</label>
                            <input asp-for="NewMaintenanceRecord.Description" class="form-control" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç" />
                            <span asp-validation-for="NewMaintenanceRecord.Description" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <small style="color: #6c757d;">
                    üí° –û—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—è –ø—É—Å—Ç—ã–º–∏, –µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –¢–û
                </small>
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è -->
    <input asp-for="Car.Latitude" type="hidden" />
    <input asp-for="Car.Longitude" type="hidden" />
    <input asp-for="NewMaintenanceRecord.CarId" type="hidden" value="@Model.Car.Id" />

    <!-- –ö–Ω–æ–ø–∫–∏ -->
    <div class="form-buttons mt-4">
        <button type="submit" class="btn btn-primary">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
        </button>
        <button type="button" class="btn btn-secondary close-edit-modal">
            ‚ùå –û—Ç–º–µ–Ω–∞
        </button>
    </div>
</form>

